var $jscomp={scope:{},inherits:function(b,a){function d(){}d.prototype=a.prototype;b.prototype=new d;b.prototype.constructor=b;for(var e in a)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(a,e);f&&Object.defineProperty(b,e,f)}else b[e]=a[e]}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[a]=d.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,a,d,e){if(a){d=$jscomp.global;b=b.split(".");for(e=0;e<b.length-1;e++){var f=b[e];f in d||(d[f]={});d=d[f]}b=b[b.length-1];e=d[b];a=a(e);a!=e&&null!=a&&$jscomp.defineProperty(d,b,{configurable:!0,writable:!0,value:a})}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var a=0;return $jscomp.iteratorPrototype(function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(b,a){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var d=0,e={next:function(){if(d<b.length){var f=d++;return{value:a(f,b[f]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};
$jscomp.polyfill("Array.prototype.entries",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(a,d){return[a,d]})}},"es6-impl","es3");$jscomp.findInternal=function(b,a,d){b instanceof String&&(b=String(b));for(var e=b.length,f=0;f<e;f++){var c=b[f];if(a.call(d,c,f,b))return{i:f,v:c}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6-impl","es3");
(function(b){function a(e){if(d[e])return d[e].exports;var f=d[e]={exports:{},id:e,loaded:!1};b[e].call(f.exports,f,f.exports,a);f.loaded=!0;return f.exports}var d={};a.m=b;a.c=d;a.p="";return a(0)})([function(b,a,d){b.exports=d(1)},function(b,a,d){var e=d(2);"undefined"!==typeof performance&&"undefined"!==typeof performance.now&&performance.now.bind(performance);b=function(){e.call(this)};$jscomp.inherits(b,e);b.prototype.init=function(a){a()};b.prototype.flush=function(a){a()};b.prototype.close=
function(){};b.prototype.receiveInput=function(a,c){this.time(function(){this.queueData(a)}.bind(this));c()};window&&(window.OGVDemuxerWebM=b);self&&(self.OGVDemuxerWebM=b)},function(b,a,d){var e=d(3),f=d(6),c=d(8),h=d(9),g=d(10),l=d(12),m=d(4),k;k="undefined"===typeof performance||"undefined"===typeof performance.now?Date.now:performance.now.bind(performance);a=function(){this.shown=!1;this.clusters=[];this.segmentInfo=[];this.state=0;this.videoPackets=[];this.audioPackets=[];this.loadedMetadata=
!1;this.seekable=!0;this.dataInterface=new e;this.currentElement=this.segment=null;this.segmentIsLoaded=!1;this.segmentDataOffset;this.headerIsLoaded=!1;this.tempElementHeader=new m(-1,-1,-1,-1);this.tempElementHeader.reset();this.currentCluster=this.tracks=this.segmentInfo=this.currentElement=null;this.cpuTime=0;this.seekHead=null;this.isSeeking=this.cuesLoaded=!1;this.tempSeekPosition=-1;this.loadingCues=!1;this.seekCueTarget=null;this.eof=!1;this.audioTrack=this.videoTrack=this.audioFormat=this.videoCodec=
this.audioFormat=this.videoFormat=null;Object.defineProperty(this,"duration",{get:function(){return 0>this.segmentInfo.duration?-1:this.segmentInfo.duration/1E3}});Object.defineProperty(this,"frameReady",{get:function(){return 0<this.videoPackets.length}});Object.defineProperty(this,"hasAudio",{get:function(){return this.loadedMetadata&&this.audioCodec?!0:!1}});Object.defineProperty(this,"audioReady",{get:function(){return 0<this.audioPackets.length}});Object.defineProperty(this,"audioTimestamp",
{get:function(){return 0<this.audioPackets.length?this.audioPackets[0].timestamp:-1}});Object.defineProperty(this,"frameTimestamp",{get:function(){return 0<this.videoPackets.length?this.videoPackets[0].timestamp:-1}});Object.defineProperty(this,"keyframeTimestamp",{get:function(){return 0<this.videoPackets.length?this.videoPackets[0].keyframeTimestamp:-1}});Object.defineProperty(this,"hasVideo",{get:function(){return this.loadedMetadata&&this.videoCodec?!0:!1}});Object.defineProperty(this,"nextKeyframeTimestamp",
{get:function(){throw"looking for kf timestamp";}});console.log("%c JSWEBM DEMUXER LOADED","background: #F27127; color:  #2a2a2a")};a.prototype.time=function(a){var c=k();a=a();c=k()-c;this.cpuTime+=c;return a};a.prototype.validateMetadata=function(){var a,c,d;for(d in this.tracks.trackEntries){var b=this.tracks.trackEntries[d];if(2===b.trackType){c=b;a=b.codecID;break}}this.audioTrack=c;switch(a){case "A_VORBIS":this.audioCodec="vorbis";this.initVorbisHeaders(c);break;default:this.audioCodec=null}for(d in this.tracks.trackEntries)if(b=
this.tracks.trackEntries[d],1===b.trackType){c=b;a=b.codecID;break}switch(a){case "V_VP8":this.videoCodec="vp8";break;default:this.videoCodec=null}this.videoTrack=c;this.videoFormat={width:c.width,height:c.height,chromaWidth:c.width>>1,chromaHeight:c.height>>1,cropLeft:c.pixelCropLeft,cropTop:c.pixelCropTop,cropWidth:c.width-c.pixelCropLeft-c.pixelCropRight,cropHeight:c.height-c.pixelCropTop-c.pixelCropBottom,displayWidth:c.displayWidth,displayHeight:c.displayHeight,fps:0};this.loadedMetadata=!0};
a.prototype.initVorbisHeaders=function(c){var a=new DataView(c.codecPrivate),d=a.getUint8(0),b=a.getUint8(1),e=a.getUint8(2),g=a.byteLength-b-e-1;if(2!==d)throw"INVALID VORBIS HEADER";d=3;b=d+b;this.audioPackets.push({data:a.buffer.slice(d,b),timestamp:-1});d=b;b=d+e;this.audioPackets.push({data:a.buffer.slice(d,b),timestamp:-1});d=b;this.audioPackets.push({data:a.buffer.slice(d,d+g),timestamp:-1});this.audioTrack=c};a.prototype.queueData=function(c){this.dataInterface.recieveInput(c)};a.prototype.demux=
function(){var c=!1;switch(this.state){case 0:if(this.initDemuxer(),1!==this.state)break;case 1:c=this.load();break;case 2:c=this.processSeeking()}return c};a.prototype.process=function(c){var a=k(),d=!1;switch(this.state){case 0:if(this.initDemuxer(),1!==this.state)break;case 1:d=this.load();break;case 2:console.warn("Seek processing");d=this.processSeeking();break;default:throw"state got wrecked";}a=k()-a;this.cpuTime+=a;c(!(1!==d&&!0!==d))};a.prototype.load=function(){for(var a=!1;this.dataInterface.offset<
this.segment.end;){if(!this.tempElementHeader.status&&(this.dataInterface.peekAndSetElement(this.tempElementHeader),!this.tempElementHeader.status))return null;switch(this.tempElementHeader.id){case 290298740:this.seekHead||(this.seekHead=new f(this.tempElementHeader.getData(),this.dataInterface));this.seekHead.load();if(!this.seekHead.loaded)return!1;break;case 236:if(this.dataInterface.peekBytes(this.tempElementHeader.size))this.dataInterface.skipBytes(this.tempElementHeader.size);else return!1;
break;case 357149030:this.segmentInfo||(this.segmentInfo=new c(this.tempElementHeader.getData(),this.dataInterface));this.segmentInfo.load();if(!this.segmentInfo.loaded)return!1;break;case 374648427:this.tracks||(this.tracks=new h(this.tempElementHeader.getData(),this.dataInterface,this));this.tracks.load();if(!this.tracks.loaded)return!1;break;case 475249515:this.cues||(this.cues=new l(this.tempElementHeader.getData(),this.dataInterface,this));this.cues.load();if(!this.cues.loaded)return!1;this.cuesLoaded=
!0;break;case 524531317:if(!this.loadedMetadata)return this.validateMetadata(),!0;this.currentCluster||(this.currentCluster=new g(this.tempElementHeader.offset,this.tempElementHeader.size,this.tempElementHeader.end,this.tempElementHeader.dataOffset,this.dataInterface,this));a=this.currentCluster.load();if(!this.currentCluster.loaded)return a;this.currentCluster=null;break;default:this.state=3;if(this.dataInterface.peekBytes(this.tempElementHeader.size))this.dataInterface.skipBytes(this.tempElementHeader.size);
else return!1;console.log("UNSUPORTED ELEMENT FOUND, SKIPPING")}this.tempElementHeader.reset()}this.eof=!0;this.state=4;return a};a.prototype.initDemuxer=function(){var c=this.dataInterface;if(!this.headerIsLoaded){if(!this.elementEBML){this.elementEBML=c.peekElement();if(!this.elementEBML)return null;440786851!==this.elementEBML.id&&console.warn("INVALID PARSE, HEADER NOT LOCATED")}for(var a=this.elementEBML.end;c.offset<a;){if(!this.tempElementHeader.status&&(c.peekAndSetElement(this.tempElementHeader),
!this.tempElementHeader.status))return null;switch(this.tempElementHeader.id){case 17030:var d=c.readUnsignedInt(this.tempElementHeader.size);if(null!==d)this.version=d;else return null;break;case 17143:d=c.readUnsignedInt(this.tempElementHeader.size);if(null!==d)this.readVersion=d;else return null;break;case 17138:d=c.readUnsignedInt(this.tempElementHeader.size);if(null!==d)this.maxIdLength=d;else return null;break;case 17139:d=c.readUnsignedInt(this.tempElementHeader.size);if(null!==d)this.maxSizeLength=
d;else return null;break;case 17026:d=c.readString(this.tempElementHeader.size);if(null!==d)this.docType=d;else return null;break;case 17031:d=c.readUnsignedInt(this.tempElementHeader.size);if(null!==d)this.docTypeVersion=d;else return null;break;case 17029:d=c.readUnsignedInt(this.tempElementHeader.size);if(null!==d)this.docTypeReadVersion=d;else return null;break;default:console.warn("Header element not found, skipping")}this.tempElementHeader.reset()}this.headerIsLoaded=!0}this.currentElement||
(this.currentElement=this.dataInterface.peekElement());if(!this.currentElement)return null;switch(this.currentElement.id){case 408125543:this.segment=this.currentElement;break;case 236:if(this.dataInterface.peekBytes(this.currentElement.size))this.dataInterface.skipBytes();else return null;break;default:console.warn("Global element not found, id: "+this.currentElement.id)}this.currentElement=null;this.segmentIsLoaded=!0;this.state=1};a.prototype.dequeueAudioPacket=function(c){if(this.audioPackets.length){var a=
this.audioPackets.shift().data;c(a)}else c(null)};a.prototype.dequeueVideoPacket=function(c){if(this.videoPackets.length){var a=this.videoPackets.shift().data;c(a)}else c(null)};a.prototype._flush=function(){this.audioPackets=[];this.videoPackets=[];this.dataInterface.flush();this.tempElementHeader=new m(-1,-1,-1,-1);this.tempElementHeader.reset();this.currentCluster=this.currentElement=null;this.eof=!1};a.prototype.getKeypointOffset=function(c,a){c=this.time(function(){return-1}.bind(this));a(c)};
a.prototype.seekToKeypoint=function(c,a){this.state=2;console.warn("SEEK BEING CALLED");var d=this.time(function(){this.seekTime=1E9*c;if(this.hasVideo)this.seekTrack=this.videoTrack;else if(this.hasAudio)this.seekTrack=this.audioTrack;else return 0;this.processSeeking();return 1}.bind(this));this.audioPackets=[];this.videoPackets=[];a(!!d)};a.prototype.processSeeking=function(){console.warn("process seek");if(!this.cuesLoaded){if(!this.cuesOffset)return this.initCues(),this._flush(),this.dataInterface.offset=
this.cuesOffset,this.onseek(this.cuesOffset),0;if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),null===this.currentElement))return 0;this.cues||(this.cues=new l(this.currentElement,this.dataInterface,this));this.cues.load();if(!this.cues.loaded)return 0;this.cuesLoaded=!0;return 0}this.calculateKeypointOffset();var c=this.seekCueTarget.cueTrackPositions.cueClusterPosition+this.segment.dataOffset;this._flush();this.dataInterface.offset=c;this.onseek(c);this.state=1;return 0};
a.prototype.initCues=function(){if(!this.cuesOffset)for(var c=this.seekHead.entries.length,a=this.seekHead.entries,d=0;d<c;d++)475249515===a[d].seekId&&(this.cuesOffset=a[d].seekPosition+this.segment.dataOffset)};a.prototype.calculateKeypointOffset=function(){var c=this.segmentInfo.timecodeScale;this.seekTime;var a=this.cues.entries,d=this.cues.entries.length,b=a[0],e,g=1;for(g;g<d;g++){e=a[g];if(e.cueTime*c>this.seekTime)break;b=e}this.seekCueTarget=b};b.exports=a},function(b,a,d){var e=d(4),f=d(5);
a=function(){this.internalPointer=this.overallPointer=0;this.currentBuffer=null;this.markerPointer=0;this.tempFloat64=new DataView(new ArrayBuffer(8));this.tempFloat32=new DataView(new ArrayBuffer(4));this.tempBinaryBuffer=null;this.seekTarget;this.dateParser=new f;Object.defineProperty(this,"offset",{get:function(){return this.overallPointer},set:function(c){this.overallPointer=c}});this.tempOctet=this.tempOctetWidth=this.tempSize=this.tempElementDataOffset=this.tempElementOffset=null;this.tempByteCounter=
this.tempByteBuffer=0;this.tempResult=this.tempVintWidth=this.tempElementSize=this.tempElementId=null;this.tempCounter=-1;this.usingBufferedRead=!1;Object.defineProperty(this,"remainingBytes",{get:function(){return this.currentBuffer?this.currentBuffer.byteLength-this.internalPointer:0}})};a.prototype.flush=function(){this.tempOctet=this.tempOctetWidth=this.tempSize=this.tempElementDataOffset=this.tempElementOffset=this.currentBuffer=null;this.tempByteCounter=this.tempByteBuffer=0;this.tempResult=
this.tempBinaryBuffer=this.tempVintWidth=this.tempElementSize=this.tempElementId=null;this.tempCounter=-1;this.usingBufferedRead=!1;this.internalPointer=this.overallPointer=0;this.tempFloat64=new DataView(new ArrayBuffer(8));this.tempFloat32=new DataView(new ArrayBuffer(4))};a.prototype.recieveInput=function(c){if(this.currentBuffer)throw"Buffer getting wrecked";this.currentBuffer=new DataView(c);this.internalPointer=0};a.prototype.popBuffer=function(){this.currentBuffer=null};a.prototype.readDate=
function(c){return this.readSignedInt(c)};a.prototype.readId=function(){if(!this.currentBuffer)return null;if(!this.tempOctet){if(!this.currentBuffer)return null;this.tempElementOffset=this.overallPointer;this.tempOctet=this.currentBuffer.getUint8(this.internalPointer);this.incrementPointers();this.tempOctetWidth=this.calculateOctetWidth();0===this.remainingBytes&&(this.currentBuffer=null)}var c;this.tempByteCounter||(this.tempByteCounter=0);for(;this.tempByteCounter<this.tempOctetWidth;){if(!this.currentBuffer)return null;
0===this.tempByteCounter?this.tempByteBuffer=this.tempOctet:(c=this.readByte(),this.tempByteBuffer=this.tempByteBuffer<<8|c);this.tempByteCounter++;0===this.remainingBytes&&(this.currentBuffer=null)}c=this.tempByteBuffer;this.tempOctetWidth=this.tempByteBuffer=this.tempByteCounter=this.tempOctet=null;return c};a.prototype.readVint=function(){if(!this.currentBuffer)return null;if(!this.tempOctet){if(!this.currentBuffer)return null;this.tempOctet=this.currentBuffer.getUint8(this.internalPointer);this.incrementPointers();
this.tempOctetWidth=this.calculateOctetWidth();0===this.remainingBytes&&(this.currentBuffer=null)}this.tempByteCounter||(this.tempByteCounter=0);for(var c,a=this.tempOctetWidth;this.tempByteCounter<a;){if(!this.currentBuffer)return null;0===this.tempByteCounter?this.tempByteBuffer=this.tempOctet&(255<<a&255)>>a:(c=this.readByte(),this.tempByteBuffer=this.tempByteBuffer<<8|c);this.tempByteCounter++;0===this.remainingBytes&&(this.currentBuffer=null)}c=this.tempByteBuffer;this.tempByteBuffer=this.tempByteCounter=
this.tempOctetWidth=this.tempOctet=null;return c};a.prototype.bufferedReadVint=function(){var c;this.tempByteCounter||(this.tempByteCounter=0);for(;this.tempByteCounter<this.tempOctetWidth;){if(!this.currentBuffer)return null;0===this.tempByteCounter?this.tempByteBuffer=this.tempOctet&(255<<this.tempOctetWidth&255)>>this.tempOctetWidth:(c=this.readByte(),this.tempByteBuffer=this.tempByteBuffer<<8|c);this.tempByteCounter++;0===this.remainingBytes&&(this.currentBuffer=null)}c=this.tempByteBuffer;this.tempByteBuffer=
this.tempByteCounter=null;return c};a.prototype.clearTemps=function(){this.tempOctet=this.tempOctetWidth=this.tempOctetMask=this.tempSize=this.tempId=null;this.tempByteCounter=this.tempByteBuffer=0;this.usingBufferedRead=!1};a.prototype.forceReadVint=function(){var c;switch(this.tempOctetWidth){case 1:c=this.tempOctet&127;break;case 2:c=this.tempOctet&63;c=c<<8|this.currentBuffer.getUint8(this.internalPointer);this.incrementPointers();break;case 3:c=this.tempOctet&31;c=c<<16|this.currentBuffer.getUint16(this.internalPointer);
this.incrementPointers(2);break;case 4:c=this.tempOctet&15;c=c<<16|this.currentBuffer.getUint16(this.internalPointer);this.incrementPointers(2);c=c<<8|this.currentBuffer.getUint8(this.internalPointer);this.incrementPointers();break;case 5:console.warn("finish this");break;case 6:console.warn("finish this");break;case 7:console.warn("finish this");break;case 8:c=this.tempOctet&0,c=c<<8|this.currentBuffer.getUint8(this.internalPointer),this.incrementPointers(),c=c<<16|this.currentBuffer.getUint16(this.internalPointer),
this.incrementPointers(2),c=c<<32|this.currentBuffer.getUint32(this.internalPointer),this.incrementPointers(4)}0===this.remainingBytes&&(this.currentBuffer=null);this.tempOctet=this.tempOctetWidth=null;return c};a.prototype.readByte=function(){this.currentBuffer||console.error("READING OUT OF BOUNDS");var c=this.currentBuffer.getUint8(this.internalPointer);this.incrementPointers();0===this.remainingBytes&&(this.currentBuffer=null);return c};a.prototype.readSignedByte=function(){this.currentBuffer||
console.error("READING OUT OF BOUNDS");var c=this.currentBuffer.getInt8(this.internalPointer);this.incrementPointers();0===this.remainingBytes&&(this.currentBuffer=null);return c};a.prototype.peekElement=function(){if(!this.currentBuffer||!this.tempElementId&&(this.tempElementId=this.readId(),null===this.tempElementId)||!this.tempElementSize&&(this.tempElementSize=this.readVint(),null===this.tempElementSize))return null;var c=new e(this.tempElementId,this.tempElementSize,this.tempElementOffset,this.overallPointer);
this.tempElementOffset=this.tempElementSize=this.tempElementId=null;return c};a.prototype.peekAndSetElement=function(c){if(!this.currentBuffer||!this.tempElementId&&(this.tempElementId=this.readId(),null===this.tempElementId)||!this.tempElementSize&&(this.tempElementSize=this.readVint(),null===this.tempElementSize))return null;c.init(this.tempElementId,this.tempElementSize,this.tempElementOffset,this.overallPointer);this.tempElementOffset=this.tempElementSize=this.tempElementId=null};a.prototype.peekBytes=
function(c){return this.currentBuffer?0<=this.currentBuffer.byteLength-this.internalPointer-c?!0:!1:!1};a.prototype.skipBytes=function(c){for(var a,d=0;d<c;){if(!this.currentBuffer)throw"Invalid Skip Length";a=c-d>this.remainingBytes?this.remainingBytes:c-d;this.incrementPointers(a);0===this.remainingBytes&&(this.currentBuffer=null);d+=a}};a.prototype.getRemainingBytes=function(){return this.currentBuffer?this.currentBuffer.byteLength-this.internalPointer:0};a.prototype.calculateOctetWidth=function(){var c=
0,a=128;do{if(this.tempOctet&a)break;a>>=1;c++}while(8>c);return c+1};a.prototype.incrementPointers=function(c){c=c||1;this.internalPointer+=c;this.overallPointer+=c};a.prototype.readUnsignedInt=function(c){if(!this.currentBuffer)return null;(0>=c||8<c)&&console.warn("invalid file size");null===this.tempResult&&(this.tempResult=0);-1===this.tempCounter&&(this.tempCounter=0);for(var a;this.tempCounter<c;){if(!this.currentBuffer)return null;a=this.readByte();0===this.tempCounter&&0>a&&console.warn("invalid integer value");
this.tempResult<<=8;this.tempResult|=a;0===this.remainingBytes&&(this.currentBuffer=null);this.tempCounter++}c=this.tempResult;this.tempResult=null;this.tempCounter=-1;return c};a.prototype.readSignedInt=function(c){if(!this.currentBuffer)return null;(0>=c||8<c)&&console.warn("invalid file size");null===this.tempResult&&(this.tempResult=0);-1===this.tempCounter&&(this.tempCounter=0);for(var a;this.tempCounter<c;){if(!this.currentBuffer)return null;a=0===this.tempCounter?this.readByte():this.readSignedByte();
this.tempResult<<=8;this.tempResult|=a;0===this.remainingBytes&&(this.currentBuffer=null);this.tempCounter++}c=this.tempResult;this.tempResult=null;this.tempCounter=-1;return c};a.prototype.readString=function(c){this.tempString||(this.tempString="");-1===this.tempCounter&&(this.tempCounter=0);for(var a="";this.tempCounter<c;){if(!this.currentBuffer)return this.tempString+=a,null;a+=String.fromCharCode(this.readByte());0>=this.remainingBytes&&(this.currentBuffer=null);this.tempCounter++}c=this.tempString+=
a;this.tempString=null;this.tempCounter=-1;return c};a.prototype.readFloat=function(a){if(8===a){-1===this.tempCounter&&(this.tempCounter=0);null===this.tempResult&&(this.tempResult=0,this.tempFloat64.setFloat64(0,0));for(var c;this.tempCounter<a;){if(!this.currentBuffer)return null;c=this.readByte();this.tempFloat64.setUint8(this.tempCounter,c);0===this.remainingBytes&&(this.currentBuffer=null);this.tempCounter++}this.tempResult=this.tempFloat64.getFloat64(0)}else if(4===a){-1===this.tempCounter&&
(this.tempCounter=0);null===this.tempResult&&(this.tempResult=0,this.tempFloat32.setFloat32(0,0));for(;this.tempCounter<a;){if(!this.currentBuffer)return null;c=this.readByte();this.tempFloat32.setUint8(this.tempCounter,c);0===this.remainingBytes&&(this.currentBuffer=null);this.tempCounter++}this.tempResult=this.tempFloat32.getFloat32(0)}else throw"INVALID FLOAT LENGTH";a=this.tempResult;this.tempResult=null;this.tempCounter=-1;return a};a.prototype.getBinary=function(a){if(this.usingBufferedRead&&
null===this.tempCounter)throw"COUNTER WAS ERASED";if(this.remainingBytes>=a&&!this.usingBufferedRead){var c=this.currentBuffer.buffer.slice(this.internalPointer,this.internalPointer+a);this.incrementPointers(a);0===this.remainingBytes&&(this.currentBuffer=null);return c}if(!1===this.usingBufferedRead&&0<this.tempCounter)throw"INVALID BUFFERED READ";this.usingBufferedRead=!0;this.tempBinaryBuffer||(this.tempBinaryBuffer=new Uint8Array(a));-1===this.tempCounter&&(this.tempCounter=0);for(var d;this.tempCounter<
a;){if(!this.currentBuffer){if(!1===this.usingBufferedRead)throw"INVALID return  case";return null}c=a-this.tempCounter>this.remainingBytes?this.remainingBytes:a-this.tempCounter;d=new Uint8Array(this.currentBuffer.buffer,this.internalPointer,c);this.tempBinaryBuffer.set(d,this.tempCounter);this.incrementPointers(c);0===this.remainingBytes&&(this.currentBuffer=null);this.tempCounter+=c}this.tempBinaryBuffer.byteLength!==a&&console.warn("invalid read");a=this.tempBinaryBuffer;this.tempBinaryBuffer=
null;this.tempCounter=-1;this.usingBufferedRead=!1;return a.buffer};b.exports=a},function(b,a){a=function(a,b,f,c){this.id=a;this.size=b;this.offset=f;this.dataOffset=c;this.end=c+b;this.status=!0};a.prototype.init=function(a,b,f,c){this.id=a;this.size=b;this.offset=f;this.dataOffset=c;this.end=c+b;this.status=!0};a.prototype.reset=function(){this.status=!1};a.prototype.getData=function(){return{id:this.id,size:this.size,offset:this.offset,dataOffset:this.dataOffset,end:this.end}};b.exports=a},function(b,
a){b.exports=function(){}},function(b,a,d){var e=d(7);a=function(a,c){this.dataInterface=c;this.offset=a.offset;this.size=a.size;this.end=a.end;this.entries=[];this.entryCount=0;this.voidElements=[];this.voidElementCount=0;this.loaded=!1;this.currentElement=this.tempEntry=null};a.prototype.load=function(){for(var a=this.end;this.dataInterface.offset<a;){if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),null===this.currentElement))return null;switch(this.currentElement.id){case 19899:this.tempEntry||
(this.tempEntry=new e(this.currentElement,this.dataInterface));this.tempEntry.load();if(this.tempEntry.loaded)this.entries.push(this.tempEntry);else return;break;default:console.warn("Seek Head element not found")}this.currentElement=this.tempEntry=null}if(this.dataInterface.offset!==this.end)throw console.log(this),"INVALID SEEKHEAD FORMATTING";this.loaded=!0};b.exports=a},function(b,a){a=function(a,b){this.size=a.size;this.offset=a.offset;this.end=a.end;this.dataInterface=b;this.loaded=!1;this.currentElement=
null;this.seekPosition=this.seekId=-1};a.prototype.load=function(){for(;this.dataInterface.offset<this.end;){if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),null===this.currentElement))return null;switch(this.currentElement.id){case 21419:var a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.seekId=a;else return null;break;case 21420:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.seekPosition=a;else return null;
break;default:console.warn("Seek element not found, skipping : "+this.currentElement.id.toFixed(16))}this.currentElement=null}this.dataInterface.offset!==this.end&&console.error("Invalid Seek Formatting");this.loaded=!0};b.exports=a},function(b,a){a=function(a,b){this.dataInterface=b;this.offset=a.offset;this.size=a.size;this.end=a.end;this.dataOffset=this.title=this.writingApp=this.muxingApp=null;this.timecodeScale=1E6;this.duration=-1;this.loaded=!1;this.duration=this.segmentUID=null;this.dateUTC};
a.prototype.load=function(){for(var a=this.end;this.dataInterface.offset<a;){if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),null===this.currentElement))return null;switch(this.currentElement.id){case 2807729:var b=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==b)this.timecodeScale=b;else return null;break;case 19840:b=this.dataInterface.readString(this.currentElement.size);if(null!==b)this.muxingApp=b;else return null;break;case 22337:b=this.dataInterface.readString(this.currentElement.size);
if(null!==b)this.writingApp=b;else return null;break;case 31657:b=this.dataInterface.readString(this.currentElement.size);if(null!==b)this.title=b;else return null;break;case 29604:b=this.dataInterface.readString(this.currentElement.size);if(null!==b)this.segmentUID=b;else return null;break;case 17545:b=this.dataInterface.readFloat(this.currentElement.size);if(null!==b)this.duration=b;else return null;break;case 17505:b=this.dataInterface.readDate(this.currentElement.size);if(null!==b)this.dateUTC=
b;else return null;break;default:console.error("Ifno element not found, skipping : "+this.currentElement.id.toString(16))}this.currentElement=null}this.dataInterface.offset!==this.end&&console.error("Invalid SegmentInfo Formatting");this.loaded=!0};b.exports=a},function(b,a,d){var e=d(7);a=function(a,c,b){this.demuxer=b;this.dataInterface=c;this.offset=a.offset;this.size=a.size;this.end=a.end;this.trackEntries=[];this.loaded=!1;this.currentElement=this.tempEntry=null;this.trackLoader=new f};a.prototype.load=
function(){for(;this.dataInterface.offset<this.end;){if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),null===this.currentElement))return null;switch(this.currentElement.id){case 174:this.trackLoader.loading||this.trackLoader.init(this.currentElement,this.dataInterface);this.trackLoader.load();if(this.trackLoader.loaded)var a=this.trackLoader.getTrackEntry();else return;this.trackEntries.push(a);break;default:throw console.warn("TRACK BUG"),"Track entry not found";}this.currentElement=
null}this.loaded=!0};a.prototype.loadTrackEntry=function(){this.tempEntry||(this.tempEntry=new e(this.currentElement,this.dataInterface))};var f=function(){this.end=this.size=this.offset=this.dataInterface=null;this.loading=this.loaded=!1;this.trackData={};this.trackData.trackNumber=null;this.trackData.trackType=null;this.trackData.name=null;this.trackData.codecName=null;this.trackData.defaultDuration=null;this.trackData.codecID=null;this.trackData.lacing=null;this.trackData.codecPrivate=null;this.trackData.codecDelay=
null;this.minCache=this.tempTrack=this.trackData.seekPreRoll=null};f.prototype.init=function(a,c){this.dataInterface=c;this.offset=a.offset;this.size=a.size;this.end=a.end;this.loaded=!1;this.loading=!0;this.trackData.trackNumber=null;this.trackData.trackType=null;this.trackData.name=null;this.trackData.codecName=null;this.trackData.defaultDuration=null;this.trackData.codecID=null;this.trackData.lacing=null;this.trackData.codecPrivate=null;this.trackData.codecDelay=null;this.trackData.seekPreRoll=
null;this.minCache=this.tempTrack=this.trackData.trackUID=null};f.prototype.load=function(){for(var a=this.end;this.dataInterface.offset<a;){if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),null===this.currentElement))return null;switch(this.currentElement.id){case 224:this.tempTrack||(this.tempTrack=new c(this.currentElement,this.dataInterface));this.tempTrack.load();if(!this.tempTrack.loaded)return;break;case 225:this.tempTrack||(this.tempTrack=new h(this.currentElement,
this.dataInterface));this.tempTrack.load();if(!this.tempTrack.loaded)return;break;case 215:var b=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==b)this.trackData.trackNumber=b;else return null;break;case 131:b=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==b)this.trackData.trackType=b;else return null;break;case 21358:b=this.dataInterface.readString(this.currentElement.size);if(null!==b)this.trackData.name=b;else return null;break;case 2459272:b=this.dataInterface.readString(this.currentElement.size);
if(null!==b)this.trackData.codecName=b;else return null;break;case 2274716:b=this.dataInterface.readString(this.currentElement.size);if(null!==b)this.trackData.language=b;else return null;break;case 2352003:b=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==b)this.trackData.defaultDuration=b;else return null;break;case 134:b=this.dataInterface.readString(this.currentElement.size);if(null!==b)this.trackData.codecID=b;else return null;break;case 156:b=this.dataInterface.readUnsignedInt(this.currentElement.size);
if(null!==b)this.trackData.lacing=b;else return null;break;case 25506:b=this.dataInterface.getBinary(this.currentElement.size);if(null!==b)this.trackData.codecPrivate=b;else return null;break;case 22186:b=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==b)this.trackData.codecDelay=b;else return null;break;case 22203:b=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==b)this.trackData.seekPreRoll=b;else return null;break;case 29637:b=this.dataInterface.readUnsignedInt(this.currentElement.size);
if(null!==b)this.trackData.trackUID=b;else return null;break;case 28135:b=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==b)this.trackData.minCache=b;else return null;break;default:console.warn("track data element not found, skipping : "+this.currentElement.id.toString(16))}this.currentElement=null}this.loaded=!0};f.prototype.getTrackEntry=function(){this.tempTrack.loadMeta(this.trackData);var a=this.tempTrack;this.tempTrack=null;this.loading=!1;return a};d=function(){};d.prototype.loadMeta=
function(a){for(var c in a)this[c]=a[c]};var c=function(a,c){this.dataInterface=c;this.offset=a.offset;this.size=a.size;this.end=a.end;this.loaded=!1;this.displayHeight=this.displayWidth=this.height=this.width=null;this.displayUnit=0;this.frameRate=this.stereoMode=null;this.pixelCropRight=this.pixelCropLeft=this.pixelCropTop=this.pixelCropBottom=0};$jscomp.inherits(c,d);c.prototype.load=function(){for(;this.dataInterface.offset<this.end;){if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),
null===this.currentElement))return null;switch(this.currentElement.id){case 176:var a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.width=a;else return null;break;case 186:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.height=a;else return null;break;case 21680:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.displayWidth=a;else return null;break;case 21690:a=this.dataInterface.readUnsignedInt(this.currentElement.size);
if(null!==a)this.displayHeight=a;else return null;break;case 21682:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.displayUnit=a;else return null;break;case 21432:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.stereoMode=a;else return null;break;case 2327523:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.frameRate=a;else return null;break;case 21936:console.error("NO COLOR LOADING YET");default:console.warn("Info element not found, skipping: "+
this.currentElement.id.toFixed(16))}this.currentElement=null}this.displayWidth||(this.displayWidth=this.width-this.pixelCropLeft);this.displayHeight||(this.displayHeight=this.height-this.pixelCropTop);this.loaded=!0};var h=function(a,c){this.dataInterface=c;this.offset=a.offset;this.size=a.size;this.end=a.end;this.loaded=!1;this.bitDepth=this.channel=this.rate=null};$jscomp.inherits(h,d);h.prototype.load=function(){for(;this.dataInterface.offset<this.end;){if(!this.currentElement&&(this.currentElement=
this.dataInterface.peekElement(),null===this.currentElement))return null;switch(this.currentElement.id){case 181:var a=this.dataInterface.readFloat(this.currentElement.size);if(null!==a)this.rate=a;else return null;break;case 159:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.channels=a;else return null;break;case 25188:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.bitDepth=a;else return null;break;default:console.warn("Ifno element not found, skipping")}this.currentElement=
null}this.loaded=!0};b.exports=a},function(b,a,d){var e=d(4),f=d(11);a=function(a,b,d,l,m,k){this.demuxer=k;this.dataInterface=m;this.offset=a;this.size=b;this.end=d;this.dataOffset=l;this.loaded=!1;this.tempBlock=this.timeCode=this.currentElement=this.tempEntry=null;this.tempElementHeader=new e(-1,-1,-1,-1);this.tempElementHeader.reset();this.tempBlock=new f;return!0};a.prototype.init=function(){};a.prototype.reset=function(){};a.prototype.load=function(){for(;this.dataInterface.offset<this.end;){if(!this.tempElementHeader.status&&
(this.dataInterface.peekAndSetElement(this.tempElementHeader),!this.tempElementHeader.status))return null;switch(this.tempElementHeader.id){case 231:var a=this.dataInterface.readUnsignedInt(this.tempElementHeader.size);if(null!==a)this.timeCode=a,console.warn("timecode seeked to:"+this.timeCode);else return null;break;case 163:this.tempBlock.status||this.tempBlock.init(this.tempElementHeader.offset,this.tempElementHeader.size,this.tempElementHeader.end,this.tempElementHeader.dataOffset,this.dataInterface,
this);this.tempBlock.load();if(!this.tempBlock.loaded)return 0;this.tempBlock.reset();this.tempEntry=null;this.tempElementHeader.reset();if(this.dataInterface.offset!==this.end)return!0}this.tempEntry=null;this.tempElementHeader.reset()}this.loaded=!0;return!1};b.exports=a},function(b,a){a=function(){this.cluster;this.dataInterface;this.offset;this.dataOffset;this.size;this.end;this.loaded=!1;this.trackNumber=null;this.timeCode=-1;this.flags=null;this.invisible=this.keyframe=!1;this.lacing=0;this.discardable=
!1;this.headerSize=this.lacedFrameCount=null;this.frameSizes=[];this.frameLength=this.track=this.tempFrame=this.tempCounter=null;this.isLaced=!1;this.stop=null;this.status=!1};a.prototype.init=function(a,b,f,c,h,g){this.cluster=g;this.dataInterface=h;this.offset=a;this.dataOffset=c;this.size=b;this.end=f;this.loaded=!1;this.flags=this.timeCode=this.trackNumber=null;this.invisible=this.keyframe=!1;this.lacing=0;this.discardable=!1;this.headerSize=this.lacedFrameCount=null;this.frameSizes=[];this.frameLength=
this.track=this.tempFrame=this.tempCounter=null;this.isLaced=!1;this.stop=this.offset+this.size;this.status=!0;this.trackEntries=this.cluster.demuxer.tracks.trackEntries;this.videoPackets=this.cluster.demuxer.videoPackets;this.audioPackets=this.cluster.demuxer.audioPackets};a.prototype.reset=function(){this.status=!1};a.prototype.loadTrack=function(){this.track=this.trackEntries[this.trackNumber-1]};a.prototype.load=function(){var a=this.dataInterface;if(this.loaded)throw"ALREADY LOADED";if(null===
this.trackNumber){this.trackNumber=a.readVint();if(null===this.trackNumber)return null;this.loadTrack()}if(null===this.timeCode&&(this.timeCode=a.readUnsignedInt(2),null===this.timeCode))return null;if(null===this.flags){this.flags=a.readUnsignedInt(1);if(null===this.flags)return null;this.keyframe=0===(this.flags>>7&1)?!1:!0;this.invisible=0===(this.flags>>2&1)?!1:!0;this.lacing=(this.flags&6)>>1;if(3<this.lacing||0>this.lacing)throw"INVALID LACING";}if(1===this.lacing||3===this.lacing){console.warn("DETECTING LACING");
if(!this.lacedFrameCount){this.lacedFrameCount=a.readByte();if(null===this.lacedFrameCount)return null;this.lacedFrameCount++}this.tempCounter||(this.tempCounter=0);for(;this.tempCounter<this.lacedFrameCount;){var b=a.readByte();if(null===b)return null;this.frameSizes.push(b);this.tempCounter++}}this.headerSize||(this.headerSize=a.offset-this.dataOffset);switch(this.lacing){case 1:case 2:case 3:case 0:if(!this.frameLength&&(this.frameLength=this.size-this.headerSize,0>=this.frameLength))throw"INVALID FRAME LENGTH "+
this.frameLength;b=a.getBinary(this.frameLength);if(null===b){if(!1===a.usingBufferedRead)throw"SHOULD BE BUFFERED READ";return null}if(!0===a.usingBufferedRead)throw"SHOULD NOT BE BUFFERED READ";if(b.byteLength!==this.frameLength)throw"INVALID FRAME";if(!0===a.usingBufferedRead)throw"SHOULD NOT BE BUFFERED READ";var f=(this.timeCode+this.cluster.timeCode)/1E3;if(0>f)throw"INVALID TIMESTAMP";1===this.track.trackType?this.videoPackets.push({data:b,timestamp:f,keyframeTimestamp:f,isKeyframe:!0}):2===
this.track.trackType&&this.audioPackets.push({data:b,timestamp:f});break;default:throw console.log(this),console.warn("LACED ELEMENT FOUND"),"STOP HERE";}if(this.end!==a.offset)throw console.error(this),"INVALID BLOCK SIZE";this.loaded=!0;this.frameLength=this.tempCounter=this.tempFrame=this.headerSize=null};b.exports=a},function(b,a,d){var e=d(13);a=function(a,b,d){this.dataInterface=b;this.offset=a.offset;this.size=a.size;this.end=a.end;this.entries=[];this.loaded=!1;this.tempEntry=null;this.demuxer=
d;this.currentElement=null};a.prototype.load=function(){for(var a=this.end;this.dataInterface.offset<a;){if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),null===this.currentElement))return null;switch(this.currentElement.id){case 187:this.tempEntry||(this.tempEntry=new f(this.currentElement,this.dataInterface));this.tempEntry.load();if(this.tempEntry.loaded)this.entries.push(this.tempEntry);else return;break;default:console.warn("Cue Head element not found")}this.currentElement=
this.tempEntry=null}if(this.dataInterface.offset!==this.end)throw console.log(this),"INVALID CUE FORMATTING";this.loaded=!0};a.prototype.getCount=function(){return this.cuePoints.length};a.prototype.init=function(){};a.prototype.preloadCuePoint=function(){};a.prototype.find=function(){};a.prototype.getFirst=function(){};a.prototype.getLast=function(){};a.prototype.getNext=function(){};a.prototype.getBlock=function(){};a.prototype.findOrPreloadCluster=function(){};var f=function(a,b){this.dataInterface=
b;this.offset=a.offset;this.size=a.size;this.end=a.end;this.loaded=!1;this.cueTrackPositions=this.cueTime=this.currentElement=this.tempElement=null};f.prototype.load=function(){for(var a=this.end;this.dataInterface.offset<a;){if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),null===this.currentElement))return null;switch(this.currentElement.id){case 183:this.cueTrackPositions||(this.cueTrackPositions=new e(this.currentElement,this.dataInterface));this.cueTrackPositions.load();
if(!this.cueTrackPositions.loaded)return;break;case 179:var b=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==b)this.cueTime=b;else return null;break;default:console.warn("Cue Point not found, skipping")}this.currentElement=null}this.loaded=!0};b.exports=a},function(b,a){a=function(a,b){this.dataInterface=b;this.offset=a.offset;this.size=a.size;this.end=a.end;this.loaded=!1;this.cueTrack=this.currentElement=this.tempElement=null;this.cueRelativePosition=this.cueClusterPosition=
0};a.prototype.load=function(){for(;this.dataInterface.offset<this.end;){if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),null===this.currentElement))return null;switch(this.currentElement.id){case 247:var a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.cueTrack=a;else return null;break;case 241:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.cueClusterPosition=a;else return null;break;case 240:a=this.dataInterface.readUnsignedInt(this.currentElement.size);
if(null!==a)this.cueRelativePosition=a;else return null;break;default:console.warn("Cue track positions not found! "+this.currentElement.id)}this.currentElement=null}this.dataInterface.offset!==this.end&&console.error("Invalid Seek Formatting");this.loaded=!0};b.exports=a}]);