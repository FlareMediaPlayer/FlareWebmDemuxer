var $jscomp={scope:{},inherits:function(c,b){function d(){}d.prototype=b.prototype;c.prototype=new d;c.prototype.constructor=c;for(var e in b)if(Object.defineProperties){var a=Object.getOwnPropertyDescriptor(b,e);a&&Object.defineProperty(c,e,a)}else c[e]=b[e]}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,b,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");c!=Array.prototype&&c!=Object.prototype&&(c[b]=d.value)};
$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(c,b,d,e){if(b){d=$jscomp.global;c=c.split(".");for(e=0;e<c.length-1;e++){var a=c[e];a in d||(d[a]={});d=d[a]}c=c[c.length-1];e=d[c];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(d,c,{configurable:!0,writable:!0,value:b})}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var b=0;return $jscomp.iteratorPrototype(function(){return b<c.length?{done:!1,value:c[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(c,b){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var d=0,e={next:function(){if(d<c.length){var a=d++;return{value:b(a,c[a]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};
$jscomp.polyfill("Array.prototype.entries",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(b,c){return[b,c]})}},"es6-impl","es3");$jscomp.findInternal=function(c,b,d){c instanceof String&&(c=String(c));for(var e=c.length,a=0;a<e;a++){var f=c[a];if(b.call(d,f,a,c))return{i:a,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6-impl","es3");
(function(c){function b(e){if(d[e])return d[e].exports;var a=d[e]={exports:{},id:e,loaded:!1};c[e].call(a.exports,a,a.exports,b);a.loaded=!0;return a.exports}var d={};b.m=c;b.c=d;b.p="";return b(0)})([function(c,b,d){c.exports=d(1)},function(c,b,d){var e=d(2);"undefined"!==typeof performance&&"undefined"!==typeof performance.now&&performance.now.bind(performance);c=function(){e.call(this)};$jscomp.inherits(c,e);c.prototype.init=function(a){a()};c.prototype.flush=function(a){a()};c.prototype.close=
function(){};c.prototype.receiveInput=function(a,b){this.time(function(){this.queueData(a)}.bind(this));b()};window&&(window.OGVDemuxerWebM=c);self&&(self.OGVDemuxerWebM=c)},function(c,b,d){var e=d(3),a=d(5),f=d(7),h=d(8),m=d(9),k=d(10),l=d(4),g;g="undefined"===typeof performance||"undefined"===typeof performance.now?Date.now:performance.now.bind(performance);b=function(){this.shown=!1;this.clusters=[];this.segmentInfo=[];this.state=0;this.videoPackets=[];this.audioPackets=[];this.loadedMetadata=
!1;this.seekable=!0;this.dataInterface=new e;this.currentElement=this.segment=null;this.segmentIsLoaded=!1;this.segmentDataOffset;this.headerIsLoaded=!1;this.tempElementHeader=new l(-1,-1,-1,-1);this.tempElementHeader.reset();this.currentCluster=this.tracks=this.segmentInfo=this.currentElement=null;this.cpuTime=0;this.seekHead=null;this.isSeeking=this.cuesLoaded=!1;this.tempSeekPosition=-1;this.loadingCues=!1;this.seekCueTarget=null;this.eof=!1;this.audioTrack=this.videoTrack=this.audioFormat=this.videoCodec=
this.audioFormat=this.videoFormat=null;Object.defineProperty(this,"duration",{get:function(){return 0>this.segmentInfo.duration?-1:this.segmentInfo.duration/1E3}});Object.defineProperty(this,"frameReady",{get:function(){return 0<this.videoPackets.length}});Object.defineProperty(this,"hasAudio",{get:function(){return this.loadedMetadata&&this.audioCodec?!0:!1}});Object.defineProperty(this,"audioReady",{get:function(){return 0<this.audioPackets.length}});Object.defineProperty(this,"audioTimestamp",
{get:function(){return 0<this.audioPackets.length?this.audioPackets[0].timestamp:-1}});Object.defineProperty(this,"frameTimestamp",{get:function(){return 0<this.videoPackets.length?this.videoPackets[0].timestamp:-1}});Object.defineProperty(this,"keyframeTimestamp",{get:function(){return 0<this.videoPackets.length?this.videoPackets[0].keyframeTimestamp:-1}});Object.defineProperty(this,"hasVideo",{get:function(){return this.loadedMetadata&&this.videoCodec?!0:!1}});Object.defineProperty(this,"nextKeyframeTimestamp",
{get:function(){throw"looking for kf timestamp";}});console.log("%c JSWEBM DEMUXER LOADED","background: #F27127; color:  #2a2a2a")};b.prototype.time=function(a){var b=g();a=a();b=g()-b;this.cpuTime+=b;return a};b.prototype.validateMetadata=function(){var a,b,c;for(c in this.tracks.trackEntries){var f=this.tracks.trackEntries[c];if(2===f.trackType){b=f;a=f.codecID;break}}this.audioTrack=b;switch(a){case "A_VORBIS":this.audioCodec="vorbis";this.initVorbisHeaders(b);break;default:this.audioCodec=null}for(c in this.tracks.trackEntries)if(f=
this.tracks.trackEntries[c],1===f.trackType){b=f;a=f.codecID;break}switch(a){case "V_VP8":this.videoCodec="vp8";break;default:this.videoCodec=null}this.videoTrack=b;this.videoFormat={width:b.width,height:b.height,chromaWidth:b.width>>1,chromaHeight:b.height>>1,cropLeft:b.pixelCropLeft,cropTop:b.pixelCropTop,cropWidth:b.width-b.pixelCropLeft-b.pixelCropRight,cropHeight:b.height-b.pixelCropTop-b.pixelCropBottom,displayWidth:b.displayWidth,displayHeight:b.displayHeight,fps:0};this.loadedMetadata=!0};
b.prototype.initVorbisHeaders=function(a){var b=new DataView(a.codecPrivate),c=b.getUint8(0),f=b.getUint8(1),d=b.getUint8(2),e=b.byteLength-f-d-1;if(2!==c)throw"INVALID VORBIS HEADER";c=3;f=c+f;this.audioPackets.push({data:b.buffer.slice(c,f),timestamp:-1});c=f;f=c+d;this.audioPackets.push({data:b.buffer.slice(c,f),timestamp:-1});c=f;this.audioPackets.push({data:b.buffer.slice(c,c+e),timestamp:-1});this.audioTrack=a};b.prototype.queueData=function(a){this.dataInterface.recieveInput(a)};b.prototype.demux=
function(){var a=!1;switch(this.state){case 0:if(this.initDemuxer(),1!==this.state)break;case 1:a=this.load();break;case 2:a=this.processSeeking()}return a};b.prototype.process=function(a){var b=g(),c=!1;switch(this.state){case 0:if(this.initDemuxer(),1!==this.state)break;case 1:c=this.load();break;case 2:console.warn("Seek processing");c=this.processSeeking();break;default:throw"state got wrecked";}b=g()-b;this.cpuTime+=b;a(!(1!==c&&!0!==c))};b.prototype.load=function(){for(var b=!1;this.dataInterface.offset<
this.segment.end;){if(!this.tempElementHeader.status&&(this.dataInterface.peekAndSetElement(this.tempElementHeader),!this.tempElementHeader.status))return null;switch(this.tempElementHeader.id){case 290298740:this.seekHead||(this.seekHead=new a(this.tempElementHeader.getData(),this.dataInterface));this.seekHead.load();if(!this.seekHead.loaded)return!1;break;case 236:if(this.dataInterface.peekBytes(this.tempElementHeader.size))this.dataInterface.skipBytes(this.tempElementHeader.size);else return!1;
break;case 357149030:this.segmentInfo||(this.segmentInfo=new f(this.tempElementHeader.getData(),this.dataInterface));this.segmentInfo.load();if(!this.segmentInfo.loaded)return!1;break;case 374648427:this.tracks||(this.tracks=new h(this.tempElementHeader.getData(),this.dataInterface,this));this.tracks.load();if(!this.tracks.loaded)return!1;break;case 475249515:this.cues||(this.cues=new k(this.tempElementHeader.getData(),this.dataInterface,this));this.cues.load();if(!this.cues.loaded)return!1;this.cuesLoaded=
!0;break;case 524531317:if(!this.loadedMetadata)return this.validateMetadata(),!0;this.currentCluster||(this.currentCluster=new m(this.tempElementHeader.offset,this.tempElementHeader.size,this.tempElementHeader.end,this.tempElementHeader.dataOffset,this.dataInterface,this));b=this.currentCluster.load();if(!this.currentCluster.loaded)return b;this.currentCluster=null;break;default:this.state=3;if(this.dataInterface.peekBytes(this.tempElementHeader.size))this.dataInterface.skipBytes(this.tempElementHeader.size);
else return!1;console.log("UNSUPORTED ELEMENT FOUND, SKIPPING")}this.tempElementHeader.reset()}this.eof=!0;this.state=4;return b};b.prototype.initDemuxer=function(){var a=this.dataInterface;if(!this.headerIsLoaded){if(!this.elementEBML){this.elementEBML=a.peekElement();if(!this.elementEBML)return null;440786851!==this.elementEBML.id&&console.warn("INVALID PARSE, HEADER NOT LOCATED")}for(var b=this.elementEBML.end;a.offset<b;){if(!this.tempElementHeader.status&&(a.peekAndSetElement(this.tempElementHeader),
!this.tempElementHeader.status))return null;switch(this.tempElementHeader.id){case 17030:var c=a.readUnsignedInt(this.tempElementHeader.size);if(null!==c)this.version=c;else return null;break;case 17143:c=a.readUnsignedInt(this.tempElementHeader.size);if(null!==c)this.readVersion=c;else return null;break;case 17138:c=a.readUnsignedInt(this.tempElementHeader.size);if(null!==c)this.maxIdLength=c;else return null;break;case 17139:c=a.readUnsignedInt(this.tempElementHeader.size);if(null!==c)this.maxSizeLength=
c;else return null;break;case 17026:c=a.readString(this.tempElementHeader.size);if(null!==c)this.docType=c;else return null;break;case 17031:c=a.readUnsignedInt(this.tempElementHeader.size);if(null!==c)this.docTypeVersion=c;else return null;break;case 17029:c=a.readUnsignedInt(this.tempElementHeader.size);if(null!==c)this.docTypeReadVersion=c;else return null;break;default:console.warn("Header element not found, skipping")}this.tempElementHeader.reset()}this.headerIsLoaded=!0}this.currentElement||
(this.currentElement=this.dataInterface.peekElement());if(!this.currentElement)return null;switch(this.currentElement.id){case 408125543:this.segment=this.currentElement;break;case 236:if(this.dataInterface.peekBytes(this.currentElement.size))this.dataInterface.skipBytes();else return null;break;default:console.warn("Global element not found, id: "+this.currentElement.id)}this.currentElement=null;this.segmentIsLoaded=!0;this.state=1};b.prototype.dequeueAudioPacket=function(a){if(this.audioPackets.length){var b=
this.audioPackets.shift().data;a(b)}else a(null)};b.prototype.dequeueVideoPacket=function(a){if(this.videoPackets.length){var b=this.videoPackets.shift().data;a(b)}else a(null)};b.prototype._flush=function(){this.audioPackets=[];this.videoPackets=[];this.dataInterface.flush();this.tempElementHeader=new l(-1,-1,-1,-1);this.tempElementHeader.reset();this.currentCluster=this.currentElement=null;this.eof=!1};b.prototype.getKeypointOffset=function(a,b){a=this.time(function(){return-1}.bind(this));b(a)};
b.prototype.seekToKeypoint=function(a,b){this.state=2;console.warn("SEEK BEING CALLED");var c=this.time(function(){this.seekTime=1E9*a;if(this.hasVideo)this.seekTrack=this.videoTrack;else if(this.hasAudio)this.seekTrack=this.audioTrack;else return 0;this.processSeeking();return 1}.bind(this));this.audioPackets=[];this.videoPackets=[];b(!!c)};b.prototype.processSeeking=function(){console.warn("process seek");if(!this.cuesLoaded){if(!this.cuesOffset)return this.initCues(),this._flush(),this.dataInterface.offset=
this.cuesOffset,this.onseek(this.cuesOffset),0;if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),null===this.currentElement))return 0;this.cues||(this.cues=new k(this.currentElement,this.dataInterface,this));this.cues.load();if(!this.cues.loaded)return 0;this.cuesLoaded=!0;return 0}this.calculateKeypointOffset();var a=this.seekCueTarget.cueTrackPositions.cueClusterPosition+this.segment.dataOffset;this._flush();this.dataInterface.offset=a;this.onseek(a);this.state=1;return 0};
b.prototype.initCues=function(){if(!this.cuesOffset)for(var a=this.seekHead.entries.length,b=this.seekHead.entries,c=0;c<a;c++)475249515===b[c].seekId&&(this.cuesOffset=b[c].seekPosition+this.segment.dataOffset)};b.prototype.calculateKeypointOffset=function(){var a=this.segmentInfo.timecodeScale;this.seekTime;var b=this.cues.entries,c=this.cues.entries.length,f=b[0],d,e=1;for(e;e<c;e++){d=b[e];if(d.cueTime*a>this.seekTime)break;f=d}this.seekCueTarget=f};c.exports=b},function(c,b,d){var e=d(4);b=function(){this.internalPointer=
this.overallPointer=0;this.currentBuffer=null;this.markerPointer=0;this.tempFloat64=new DataView(new ArrayBuffer(8));this.tempFloat32=new DataView(new ArrayBuffer(4));this.tempBinaryBuffer=null;this.seekTarget;Object.defineProperty(this,"offset",{get:function(){return this.overallPointer},set:function(a){this.overallPointer=a}});this.tempOctet=this.tempOctetWidth=this.tempSize=this.tempElementDataOffset=this.tempElementOffset=null;this.tempByteCounter=this.tempByteBuffer=0;this.tempResult=this.tempVintWidth=
this.tempElementSize=this.tempElementId=null;this.tempCounter=-1;this.usingBufferedRead=!1;Object.defineProperty(this,"remainingBytes",{get:function(){return this.currentBuffer?this.currentBuffer.byteLength-this.internalPointer:0}})};b.prototype.flush=function(){this.tempOctet=this.tempOctetWidth=this.tempSize=this.tempElementDataOffset=this.tempElementOffset=this.currentBuffer=null;this.tempByteCounter=this.tempByteBuffer=0;this.tempResult=this.tempBinaryBuffer=this.tempVintWidth=this.tempElementSize=
this.tempElementId=null;this.tempCounter=-1;this.usingBufferedRead=!1;this.internalPointer=this.overallPointer=0;this.tempFloat64=new DataView(new ArrayBuffer(8));this.tempFloat32=new DataView(new ArrayBuffer(4))};b.prototype.recieveInput=function(a){if(this.currentBuffer)throw"Buffer getting wrecked";this.currentBuffer=new DataView(a);this.internalPointer=0};b.prototype.popBuffer=function(){this.currentBuffer=null};b.prototype.readId=function(){if(!this.currentBuffer)return null;if(!this.tempOctet){if(!this.currentBuffer)return null;
this.tempElementOffset=this.overallPointer;this.tempOctet=this.currentBuffer.getUint8(this.internalPointer);this.incrementPointers();this.tempOctetWidth=this.calculateOctetWidth();0===this.remainingBytes&&(this.currentBuffer=null)}var a;this.tempByteCounter||(this.tempByteCounter=0);for(;this.tempByteCounter<this.tempOctetWidth;){if(!this.currentBuffer)return null;0===this.tempByteCounter?this.tempByteBuffer=this.tempOctet:(a=this.readByte(),this.tempByteBuffer=this.tempByteBuffer<<8|a);this.tempByteCounter++;
0===this.remainingBytes&&(this.currentBuffer=null)}a=this.tempByteBuffer;this.tempOctetWidth=this.tempByteBuffer=this.tempByteCounter=this.tempOctet=null;return a};b.prototype.readVint=function(){if(!this.currentBuffer)return null;if(!this.tempOctet){if(!this.currentBuffer)return null;this.tempOctet=this.currentBuffer.getUint8(this.internalPointer);this.incrementPointers();this.tempOctetWidth=this.calculateOctetWidth();0===this.remainingBytes&&(this.currentBuffer=null)}this.tempByteCounter||(this.tempByteCounter=
0);for(var a,b=this.tempOctetWidth;this.tempByteCounter<b;){if(!this.currentBuffer)return null;0===this.tempByteCounter?this.tempByteBuffer=this.tempOctet&(255<<b&255)>>b:(a=this.readByte(),this.tempByteBuffer=this.tempByteBuffer<<8|a);this.tempByteCounter++;0===this.remainingBytes&&(this.currentBuffer=null)}a=this.tempByteBuffer;this.tempByteBuffer=this.tempByteCounter=this.tempOctetWidth=this.tempOctet=null;return a};b.prototype.bufferedReadVint=function(){var a;this.tempByteCounter||(this.tempByteCounter=
0);for(;this.tempByteCounter<this.tempOctetWidth;){if(!this.currentBuffer)return null;0===this.tempByteCounter?this.tempByteBuffer=this.tempOctet&(255<<this.tempOctetWidth&255)>>this.tempOctetWidth:(a=this.readByte(),this.tempByteBuffer=this.tempByteBuffer<<8|a);this.tempByteCounter++;0===this.remainingBytes&&(this.currentBuffer=null)}a=this.tempByteBuffer;this.tempByteBuffer=this.tempByteCounter=null;return a};b.prototype.clearTemps=function(){this.tempOctet=this.tempOctetWidth=this.tempOctetMask=
this.tempSize=this.tempId=null;this.tempByteCounter=this.tempByteBuffer=0;this.usingBufferedRead=!1};b.prototype.forceReadVint=function(){var a;switch(this.tempOctetWidth){case 1:a=this.tempOctet&127;break;case 2:a=this.tempOctet&63;a=a<<8|this.currentBuffer.getUint8(this.internalPointer);this.incrementPointers();break;case 3:a=this.tempOctet&31;a=a<<16|this.currentBuffer.getUint16(this.internalPointer);this.incrementPointers(2);break;case 4:a=this.tempOctet&15;a=a<<16|this.currentBuffer.getUint16(this.internalPointer);
this.incrementPointers(2);a=a<<8|this.currentBuffer.getUint8(this.internalPointer);this.incrementPointers();break;case 5:console.warn("finish this");break;case 6:console.warn("finish this");break;case 7:console.warn("finish this");break;case 8:a=this.tempOctet&0,a=a<<8|this.currentBuffer.getUint8(this.internalPointer),this.incrementPointers(),a=a<<16|this.currentBuffer.getUint16(this.internalPointer),this.incrementPointers(2),a=a<<32|this.currentBuffer.getUint32(this.internalPointer),this.incrementPointers(4)}0===
this.remainingBytes&&(this.currentBuffer=null);this.tempOctet=this.tempOctetWidth=null;return a};b.prototype.readByte=function(){this.currentBuffer||console.error("READING OUT OF BOUNDS");var a=this.currentBuffer.getUint8(this.internalPointer);this.incrementPointers();0===this.remainingBytes&&(this.currentBuffer=null);return a};b.prototype.readSignedByte=function(){this.currentBuffer||console.error("READING OUT OF BOUNDS");var a=this.currentBuffer.getInt8(this.internalPointer);this.incrementPointers();
0===this.remainingBytes&&(this.currentBuffer=null);return a};b.prototype.peekElement=function(){if(!this.currentBuffer||!this.tempElementId&&(this.tempElementId=this.readId(),null===this.tempElementId)||!this.tempElementSize&&(this.tempElementSize=this.readVint(),null===this.tempElementSize))return null;var a=new e(this.tempElementId,this.tempElementSize,this.tempElementOffset,this.overallPointer);this.tempElementOffset=this.tempElementSize=this.tempElementId=null;return a};b.prototype.peekAndSetElement=
function(a){if(!this.currentBuffer||!this.tempElementId&&(this.tempElementId=this.readId(),null===this.tempElementId)||!this.tempElementSize&&(this.tempElementSize=this.readVint(),null===this.tempElementSize))return null;a.init(this.tempElementId,this.tempElementSize,this.tempElementOffset,this.overallPointer);this.tempElementOffset=this.tempElementSize=this.tempElementId=null};b.prototype.peekBytes=function(a){return this.currentBuffer?0<=this.currentBuffer.byteLength-this.internalPointer-a?!0:!1:
!1};b.prototype.skipBytes=function(a){for(var b,c=0;c<a;){if(!this.currentBuffer)throw"Invalid Skip Length";b=a-c>this.remainingBytes?this.remainingBytes:a-c;this.incrementPointers(b);0===this.remainingBytes&&(this.currentBuffer=null);c+=b}};b.prototype.getRemainingBytes=function(){return this.currentBuffer?this.currentBuffer.byteLength-this.internalPointer:0};b.prototype.calculateOctetWidth=function(){var a=0,b=128;do{if(this.tempOctet&b)break;b>>=1;a++}while(8>a);return a+1};b.prototype.incrementPointers=
function(a){a=a||1;this.internalPointer+=a;this.overallPointer+=a};b.prototype.readUnsignedInt=function(a){if(!this.currentBuffer)return null;(0>=a||8<a)&&console.warn("invalid file size");null===this.tempResult&&(this.tempResult=0);-1===this.tempCounter&&(this.tempCounter=0);for(var b;this.tempCounter<a;){if(!this.currentBuffer)return null;b=this.readByte();0===this.tempCounter&&0>b&&console.warn("invalid integer value");this.tempResult<<=8;this.tempResult|=b;0===this.remainingBytes&&(this.currentBuffer=
null);this.tempCounter++}a=this.tempResult;this.tempResult=null;this.tempCounter=-1;return a};b.prototype.readSignedInt=function(a){if(!this.currentBuffer)return null;(0>=a||8<a)&&console.warn("invalid file size");null===this.tempResult&&(this.tempResult=0);-1===this.tempCounter&&(this.tempCounter=0);for(var b;this.tempCounter<a;){if(!this.currentBuffer)return null;b=0===this.tempCounter?this.readByte():this.readSignedByte();this.tempResult<<=8;this.tempResult|=b;0===this.remainingBytes&&(this.currentBuffer=
null);this.tempCounter++}a=this.tempResult;this.tempResult=null;this.tempCounter=-1;return a};b.prototype.readString=function(a){this.tempString||(this.tempString="");-1===this.tempCounter&&(this.tempCounter=0);for(var b="";this.tempCounter<a;){if(!this.currentBuffer)return this.tempString+=b,null;b+=String.fromCharCode(this.readByte());0>=this.remainingBytes&&(this.currentBuffer=null);this.tempCounter++}a=this.tempString+=b;this.tempString=null;this.tempCounter=-1;return a};b.prototype.readFloat=
function(a){if(8===a){-1===this.tempCounter&&(this.tempCounter=0);null===this.tempResult&&(this.tempResult=0,this.tempFloat64.setFloat64(0,0));for(var b;this.tempCounter<a;){if(!this.currentBuffer)return null;b=this.readByte();this.tempFloat64.setUint8(this.tempCounter,b);0===this.remainingBytes&&(this.currentBuffer=null);this.tempCounter++}this.tempResult=this.tempFloat64.getFloat64(0)}else{if(4===a)throw"implement this!";throw"INVALID FLOAT LENGTH";}a=this.tempResult;this.tempResult=null;this.tempCounter=
-1;return a};b.prototype.getBinary=function(a){if(this.usingBufferedRead&&null===this.tempCounter)throw"COUNTER WAS ERASED";if(this.remainingBytes>=a&&!this.usingBufferedRead){var b=this.currentBuffer.buffer.slice(this.internalPointer,this.internalPointer+a);this.incrementPointers(a);0===this.remainingBytes&&(this.currentBuffer=null);return b}if(!1===this.usingBufferedRead&&0<this.tempCounter)throw"INVALID BUFFERED READ";this.usingBufferedRead=!0;this.tempBinaryBuffer||(this.tempBinaryBuffer=new Uint8Array(a));
-1===this.tempCounter&&(this.tempCounter=0);for(var c;this.tempCounter<a;){if(!this.currentBuffer){if(!1===this.usingBufferedRead)throw"INVALID return  case";return null}b=a-this.tempCounter>this.remainingBytes?this.remainingBytes:a-this.tempCounter;c=new Uint8Array(this.currentBuffer.buffer,this.internalPointer,b);this.tempBinaryBuffer.set(c,this.tempCounter);this.incrementPointers(b);0===this.remainingBytes&&(this.currentBuffer=null);this.tempCounter+=b}this.tempBinaryBuffer.byteLength!==a&&console.warn("invalid read");
a=this.tempBinaryBuffer;this.tempBinaryBuffer=null;this.tempCounter=-1;this.usingBufferedRead=!1;return a.buffer};c.exports=b},function(c,b){"use-strict";b=function(b,c,a,f){this.id=b;this.size=c;this.offset=a;this.dataOffset=f;this.end=f+c;this.status=!0};b.prototype.init=function(b,c,a,f){this.id=b;this.size=c;this.offset=a;this.dataOffset=f;this.end=f+c;this.status=!0};b.prototype.reset=function(){this.status=!1};b.prototype.getData=function(){return{id:this.id,size:this.size,offset:this.offset,
dataOffset:this.dataOffset,end:this.end}};c.exports=b},function(c,b,d){var e=d(6);b=function(a,b){this.dataInterface=b;this.offset=a.offset;this.size=a.size;this.end=a.end;this.entries=[];this.entryCount=0;this.voidElements=[];this.voidElementCount=0;this.loaded=!1;this.currentElement=this.tempEntry=null};b.prototype.load=function(){for(var a=this.end;this.dataInterface.offset<a;){if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),null===this.currentElement))return null;
switch(this.currentElement.id){case 19899:this.tempEntry||(this.tempEntry=new e(this.currentElement,this.dataInterface));this.tempEntry.load();if(this.tempEntry.loaded)this.entries.push(this.tempEntry);else return;break;default:console.warn("Seek Head element not found")}this.currentElement=this.tempEntry=null}if(this.dataInterface.offset!==this.end)throw console.log(this),"INVALID SEEKHEAD FORMATTING";this.loaded=!0};c.exports=b},function(c,b){b=function(b,c){this.size=b.size;this.offset=b.offset;
this.end=b.end;this.dataInterface=c;this.loaded=!1;this.currentElement=null;this.seekPosition=this.seekId=-1};b.prototype.load=function(){for(;this.dataInterface.offset<this.end;){if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),null===this.currentElement))return null;switch(this.currentElement.id){case 21419:var b=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==b)this.seekId=b;else return null;break;case 21420:b=this.dataInterface.readUnsignedInt(this.currentElement.size);
if(null!==b)this.seekPosition=b;else return null;break;default:console.warn("Seek element not found, skipping")}this.currentElement=null}this.dataInterface.offset!==this.end&&console.error("Invalid Seek Formatting");this.loaded=!0};c.exports=b},function(c,b){b=function(b,c){this.dataInterface=c;this.offset=b.offset;this.size=b.size;this.end=b.end;this.dataOffset=this.title=this.writingApp=this.muxingApp=null;this.timecodeScale=1E6;this.duration=-1;this.loaded=!1;this.duration=this.segmentUID=null};
b.prototype.load=function(){for(var b=this.end;this.dataInterface.offset<b;){if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),null===this.currentElement))return null;switch(this.currentElement.id){case 2807729:var c=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==c)this.timecodeScale=c;else return null;break;case 19840:c=this.dataInterface.readString(this.currentElement.size);if(null!==c)this.muxingApp=c;else return null;break;case 22337:c=this.dataInterface.readString(this.currentElement.size);
if(null!==c)this.writingApp=c;else return null;break;case 31657:c=this.dataInterface.readString(this.currentElement.size);if(null!==c)this.title=c;else return null;break;case 29604:c=this.dataInterface.readString(this.currentElement.size);if(null!==c)this.segmentUID=c;else return null;break;case 17545:c=this.dataInterface.readFloat(this.currentElement.size);if(null!==c)this.duration=c;else return null;break;default:console.error("Ifno element not found, skipping : "+this.currentElement.id)}this.currentElement=
null}this.dataInterface.offset!==this.end&&console.error("Invalid SegmentInfo Formatting");this.loaded=!0};c.exports=b},function(c,b,d){var e=d(6);b=function(b,c,f){this.demuxer=f;this.dataInterface=c;this.offset=b.offset;this.size=b.size;this.end=b.end;this.trackEntries=[];this.loaded=!1;this.currentElement=this.tempEntry=null;this.trackLoader=new a};b.prototype.load=function(){for(;this.dataInterface.offset<this.end;){if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),
null===this.currentElement))return null;switch(this.currentElement.id){case 174:this.trackLoader.loading||this.trackLoader.init(this.currentElement,this.dataInterface);this.trackLoader.load();if(this.trackLoader.loaded)var b=this.trackLoader.getTrackEntry();else return;this.trackEntries.push(b);break;default:throw console.warn("TRACK BUG"),"Track entry not found";}this.currentElement=null}this.loaded=!0};b.prototype.loadTrackEntry=function(){this.tempEntry||(this.tempEntry=new e(this.currentElement,
this.dataInterface))};var a=function(){this.end=this.size=this.offset=this.dataInterface=null;this.loading=this.loaded=!1;this.trackData={};this.trackData.trackNumber=null;this.trackData.trackType=null;this.trackData.name=null;this.trackData.codecName=null;this.trackData.defaultDuration=null;this.trackData.codecID=null;this.trackData.lacing=null;this.trackData.codecPrivate=null;this.trackData.codecDelay=null;this.tempTrack=this.trackData.seekPreRoll=null};a.prototype.init=function(b,a){this.dataInterface=
a;this.offset=b.offset;this.size=b.size;this.end=b.end;this.loaded=!1;this.loading=!0;this.trackData.trackNumber=null;this.trackData.trackType=null;this.trackData.name=null;this.trackData.codecName=null;this.trackData.defaultDuration=null;this.trackData.codecID=null;this.trackData.lacing=null;this.trackData.codecPrivate=null;this.trackData.codecDelay=null;this.trackData.seekPreRoll=null;this.tempTrack=this.trackData.trackUID=null};a.prototype.load=function(){for(var b=this.end;this.dataInterface.offset<
b;){if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),null===this.currentElement))return null;switch(this.currentElement.id){case 224:this.tempTrack||(this.tempTrack=new f(this.currentElement,this.dataInterface));this.tempTrack.load();if(!this.tempTrack.loaded)return;break;case 225:this.tempTrack||(this.tempTrack=new h(this.currentElement,this.dataInterface));this.tempTrack.load();if(!this.tempTrack.loaded)return;break;case 215:var a=this.dataInterface.readUnsignedInt(this.currentElement.size);
if(null!==a)this.trackData.trackNumber=a;else return null;break;case 131:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.trackData.trackType=a;else return null;break;case 21358:a=this.dataInterface.readString(this.currentElement.size);if(null!==a)this.trackData.name=a;else return null;break;case 2459272:a=this.dataInterface.readString(this.currentElement.size);if(null!==a)this.trackData.codecName=a;else return null;break;case 2274716:a=this.dataInterface.readString(this.currentElement.size);
if(null!==a)this.trackData.language=a;else return null;break;case 2352003:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.trackData.defaultDuration=a;else return null;break;case 134:a=this.dataInterface.readString(this.currentElement.size);if(null!==a)this.trackData.codecID=a;else return null;break;case 156:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.trackData.lacing=a;else return null;break;case 25506:a=this.dataInterface.getBinary(this.currentElement.size);
if(null!==a)this.trackData.codecPrivate=a;else return null;break;case 22186:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.trackData.codecDelay=a;else return null;break;case 22203:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.trackData.seekPreRoll=a;else return null;break;case 29637:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.trackData.trackUID=a;else return null;break;default:console.warn("track data element not found, skipping")}this.currentElement=
null}this.loaded=!0};a.prototype.getTrackEntry=function(){this.tempTrack.loadMeta(this.trackData);var a=this.tempTrack;this.tempTrack=null;this.loading=!1;return a};d=function(){};d.prototype.loadMeta=function(a){for(var b in a)this[b]=a[b]};var f=function(a,b){this.dataInterface=b;this.offset=a.offset;this.size=a.size;this.end=a.end;this.loaded=!1;this.displayHeight=this.displayWidth=this.height=this.width=null;this.displayUnit=0;this.frameRate=this.stereoMode=null;this.pixelCropRight=this.pixelCropLeft=
this.pixelCropTop=this.pixelCropBottom=0};$jscomp.inherits(f,d);f.prototype.load=function(){for(;this.dataInterface.offset<this.end;){if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),null===this.currentElement))return null;switch(this.currentElement.id){case 176:var a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.width=a;else return null;break;case 186:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.height=
a;else return null;break;case 21680:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.displayWidth=a;else return null;break;case 21690:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.displayHeight=a;else return null;break;case 21682:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.displayUnit=a;else return null;break;case 21432:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.stereoMode=
a;else return null;break;case 2327523:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.frameRate=a;else return null;break;case 21936:console.error("NO COLOR LOADING YET");default:console.warn("Ifno element not found, skipping")}this.currentElement=null}this.displayWidth||(this.displayWidth=this.width-this.pixelCropLeft);this.displayHeight||(this.displayHeight=this.height-this.pixelCropTop);this.loaded=!0};var h=function(a,b){this.dataInterface=b;this.offset=a.offset;
this.size=a.size;this.end=a.end;this.loaded=!1;this.bitDepth=this.channel=this.rate=null};$jscomp.inherits(h,d);h.prototype.load=function(){for(;this.dataInterface.offset<this.end;){if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),null===this.currentElement))return null;switch(this.currentElement.id){case 181:var a=this.dataInterface.readFloat(this.currentElement.size);if(null!==a)this.rate=a;else return null;break;case 159:a=this.dataInterface.readUnsignedInt(this.currentElement.size);
if(null!==a)this.channels=a;else return null;break;case 25188:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.bitDepth=a;else return null;break;default:console.warn("Ifno element not found, skipping")}this.currentElement=null}this.loaded=!0};c.exports=b},function(c,b,d){var e=d(4);b=function(b,c,d,k,l,g){this.demuxer=g;this.dataInterface=l;this.offset=b;this.size=c;this.end=d;this.dataOffset=k;this.loaded=!1;this.tempBlock=this.timeCode=this.currentElement=this.tempEntry=
null;this.tempElementHeader=new e(-1,-1,-1,-1);this.tempElementHeader.reset();this.tempBlock=new a;return!0};b.prototype.init=function(){};b.prototype.reset=function(){};b.prototype.load=function(){for(;this.dataInterface.offset<this.end;){if(!this.tempElementHeader.status&&(this.dataInterface.peekAndSetElement(this.tempElementHeader),!this.tempElementHeader.status))return null;switch(this.tempElementHeader.id){case 231:var a=this.dataInterface.readUnsignedInt(this.tempElementHeader.size);if(null!==
a)this.timeCode=a,console.warn("timecode seeked to:"+this.timeCode);else return null;break;case 163:this.tempBlock.status||this.tempBlock.init(this.tempElementHeader.offset,this.tempElementHeader.size,this.tempElementHeader.end,this.tempElementHeader.dataOffset,this.dataInterface,this);this.tempBlock.load();if(!this.tempBlock.loaded)return 0;this.tempBlock.reset();this.tempEntry=null;this.tempElementHeader.reset();if(this.dataInterface.offset!==this.end)return!0}this.tempEntry=null;this.tempElementHeader.reset()}this.loaded=
!0;return!1};var a=function(){this.cluster;this.dataInterface;this.offset;this.dataOffset;this.size;this.end;this.loaded=!1;this.trackNumber=null;this.timeCode=-1;this.flags=null;this.invisible=this.keyframe=!1;this.lacing=0;this.discardable=!1;this.headerSize=this.lacedFrameCount=null;this.frameSizes=[];this.frameLength=this.track=this.tempFrame=this.tempCounter=null;this.isLaced=!1;this.stop=null;this.status=!1};a.prototype.init=function(a,b,c,d,e,g){this.cluster=g;this.dataInterface=e;this.offset=
a;this.dataOffset=d;this.size=b;this.end=c;this.loaded=!1;this.flags=this.timeCode=this.trackNumber=null;this.invisible=this.keyframe=!1;this.lacing=0;this.discardable=!1;this.headerSize=this.lacedFrameCount=null;this.frameSizes=[];this.frameLength=this.track=this.tempFrame=this.tempCounter=null;this.isLaced=!1;this.stop=this.offset+this.size;this.status=!0;this.trackEntries=this.cluster.demuxer.tracks.trackEntries;this.videoPackets=this.cluster.demuxer.videoPackets;this.audioPackets=this.cluster.demuxer.audioPackets};
a.prototype.reset=function(){this.status=!1};a.prototype.loadTrack=function(){this.track=this.trackEntries[this.trackNumber-1]};a.prototype.load=function(){var a=this.dataInterface;if(this.loaded)throw"ALREADY LOADED";if(null===this.trackNumber){this.trackNumber=a.readVint();if(null===this.trackNumber)return null;this.loadTrack()}if(null===this.timeCode&&(this.timeCode=a.readUnsignedInt(2),null===this.timeCode))return null;if(null===this.flags){this.flags=a.readUnsignedInt(1);if(null===this.flags)return null;
this.keyframe=0===(this.flags>>7&1)?!1:!0;this.invisible=0===(this.flags>>2&1)?!1:!0;this.lacing=(this.flags&6)>>1;if(3<this.lacing||0>this.lacing)throw"INVALID LACING";}if(1===this.lacing||3===this.lacing){console.warn("DETECTING LACING");if(!this.lacedFrameCount){this.lacedFrameCount=a.readByte();if(null===this.lacedFrameCount)return null;this.lacedFrameCount++}this.tempCounter||(this.tempCounter=0);for(;this.tempCounter<this.lacedFrameCount;){var b=a.readByte();if(null===b)return null;this.frameSizes.push(b);
this.tempCounter++}}this.headerSize||(this.headerSize=a.offset-this.dataOffset);switch(this.lacing){case 1:case 2:case 3:case 0:if(!this.frameLength&&(this.frameLength=this.size-this.headerSize,0>=this.frameLength))throw"INVALID FRAME LENGTH "+this.frameLength;b=a.getBinary(this.frameLength);if(null===b){if(!1===a.usingBufferedRead)throw"SHOULD BE BUFFERED READ";return null}if(!0===a.usingBufferedRead)throw"SHOULD NOT BE BUFFERED READ";if(b.byteLength!==this.frameLength)throw"INVALID FRAME";if(!0===
a.usingBufferedRead)throw"SHOULD NOT BE BUFFERED READ";var c=(this.timeCode+this.cluster.timeCode)/1E3;if(0>c)throw"INVALID TIMESTAMP";1===this.track.trackType?this.videoPackets.push({data:b,timestamp:c,keyframeTimestamp:c,isKeyframe:!0}):2===this.track.trackType&&this.audioPackets.push({data:b,timestamp:c});break;default:throw console.log(this),console.warn("LACED ELEMENT FOUND"),"STOP HERE";}if(this.end!==a.offset)throw console.error(this),"INVALID BLOCK SIZE";this.loaded=!0;this.frameLength=this.tempCounter=
this.tempFrame=this.headerSize=null};c.exports=b},function(c,b){b=function(a,b,c){this.dataInterface=b;this.offset=a.offset;this.size=a.size;this.end=a.end;this.entries=[];this.loaded=!1;this.tempEntry=null;this.demuxer=c;this.currentElement=null};b.prototype.load=function(){for(var a=this.end;this.dataInterface.offset<a;){if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),null===this.currentElement))return null;switch(this.currentElement.id){case 187:this.tempEntry||(this.tempEntry=
new d(this.currentElement,this.dataInterface));this.tempEntry.load();if(this.tempEntry.loaded)this.entries.push(this.tempEntry);else return;break;default:console.warn("Cue Head element not found")}this.currentElement=this.tempEntry=null}if(this.dataInterface.offset!==this.end)throw console.log(this),"INVALID CUE FORMATTING";this.loaded=!0};b.prototype.getCount=function(){return this.cuePoints.length};b.prototype.init=function(){};b.prototype.preloadCuePoint=function(){};b.prototype.find=function(){};
b.prototype.getFirst=function(){};b.prototype.getLast=function(){};b.prototype.getNext=function(){};b.prototype.getBlock=function(){};b.prototype.findOrPreloadCluster=function(){};var d=function(a,b){this.dataInterface=b;this.offset=a.offset;this.size=a.size;this.end=a.end;this.loaded=!1;this.cueTrackPositions=this.cueTime=this.currentElement=this.tempElement=null};d.prototype.load=function(){for(var a=this.end;this.dataInterface.offset<a;){if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),
null===this.currentElement))return null;switch(this.currentElement.id){case 183:this.cueTrackPositions||(this.cueTrackPositions=new e(this.currentElement,this.dataInterface));this.cueTrackPositions.load();if(!this.cueTrackPositions.loaded)return;break;case 179:var b=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==b)this.cueTime=b;else return null;break;default:console.warn("Cue Point not found, skipping")}this.currentElement=null}this.loaded=!0};var e=function(a,b){this.dataInterface=
b;this.offset=a.offset;this.size=a.size;this.end=a.end;this.loaded=!1;this.cueTrack=this.currentElement=this.tempElement=null;this.cueRelativePosition=this.cueClusterPosition=0};e.prototype.load=function(){for(;this.dataInterface.offset<this.end;){if(!this.currentElement&&(this.currentElement=this.dataInterface.peekElement(),null===this.currentElement))return null;switch(this.currentElement.id){case 247:var a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.cueTrack=a;
else return null;break;case 241:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.cueClusterPosition=a;else return null;break;case 240:a=this.dataInterface.readUnsignedInt(this.currentElement.size);if(null!==a)this.cueRelativePosition=a;else return null;break;default:console.warn("Cue track positions not found! "+this.currentElement.id)}this.currentElement=null}this.dataInterface.offset!==this.end&&console.error("Invalid Seek Formatting");this.loaded=!0};c.exports=b}]);